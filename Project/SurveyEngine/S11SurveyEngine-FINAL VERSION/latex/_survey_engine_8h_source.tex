\hypertarget{_survey_engine_8h_source}{}\doxysection{Survey\+Engine.\+h}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-\/default.txt to change this license}}
\DoxyCodeLine{3 \textcolor{comment}{ * Click nbfs://nbhost/SystemFileSystem/Templates/cppFiles/file.h to edit this template}}
\DoxyCodeLine{4 \textcolor{comment}{ */}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{comment}{/* }}
\DoxyCodeLine{7 \textcolor{comment}{ * File:   SurveyEngine.h}}
\DoxyCodeLine{8 \textcolor{comment}{ * Author: andrewguzman}}
\DoxyCodeLine{9 \textcolor{comment}{ *}}
\DoxyCodeLine{10 \textcolor{comment}{ * Created on April 13, 2023, 10:48 PM}}
\DoxyCodeLine{11 \textcolor{comment}{ */}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include "{}User.h"{}}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include "{}Admin.h"{}}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{preprocessor}{\#ifndef SURVEYENGINE\_H}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define SURVEYENGINE\_H}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{keyword}{class }\mbox{\hyperlink{class_survey_engine}{SurveyEngine}} \{}
\DoxyCodeLine{20 \textcolor{keyword}{private}:}
\DoxyCodeLine{21     \textcolor{keywordtype}{bool} isActive;}
\DoxyCodeLine{22     \textcolor{keywordtype}{bool} isAdmin;}
\DoxyCodeLine{23     \textcolor{keywordtype}{bool} loggedIn;}
\DoxyCodeLine{24     \textcolor{keywordtype}{string} username;}
\DoxyCodeLine{25     \textcolor{keywordtype}{string} password;}
\DoxyCodeLine{26 \textcolor{keyword}{public}:}
\DoxyCodeLine{27 }
\DoxyCodeLine{28     \mbox{\hyperlink{class_survey_engine}{SurveyEngine}}() \{}
\DoxyCodeLine{29         loggedIn = \textcolor{keyword}{false};}
\DoxyCodeLine{30         isAdmin = \textcolor{keyword}{false};}
\DoxyCodeLine{31 }
\DoxyCodeLine{32         \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{33             \textcolor{comment}{//Main menu, login/registration prompt}}
\DoxyCodeLine{34             mainMenu();}
\DoxyCodeLine{35             \textcolor{keywordflow}{if} (loggedIn) \{}
\DoxyCodeLine{36                 \textcolor{keywordflow}{if} (isAdmin) \{}
\DoxyCodeLine{37                     \mbox{\hyperlink{class_admin}{Admin}} admin(username, password);}
\DoxyCodeLine{38                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{39                     \mbox{\hyperlink{class_user}{User}} user;}
\DoxyCodeLine{40                     user.setUsrInfo(username, password);}
\DoxyCodeLine{41                     user.prompt();}
\DoxyCodeLine{42                 \}}
\DoxyCodeLine{43             \}}
\DoxyCodeLine{44         \} \textcolor{keywordflow}{while} (!loggedIn);}
\DoxyCodeLine{45     \}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \textcolor{keywordtype}{void} mainMenu() \{}
\DoxyCodeLine{48         \textcolor{keywordtype}{char} input = \textcolor{charliteral}{' '};}
\DoxyCodeLine{49         \textcolor{keywordtype}{bool} validUsr, validAdmn;}
\DoxyCodeLine{50 }
\DoxyCodeLine{51         \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{52             cout << \textcolor{stringliteral}{"{}R) To Register \(\backslash\)t L) To Log In"{}} << endl;}
\DoxyCodeLine{53             cin >> input;}
\DoxyCodeLine{54         \} \textcolor{keywordflow}{while} (input != \textcolor{charliteral}{'R'} \&\& input != \textcolor{charliteral}{'r'} \&\& input != \textcolor{charliteral}{'L'} \&\& input != \textcolor{charliteral}{'l'});}
\DoxyCodeLine{55 }
\DoxyCodeLine{56         \textcolor{keywordflow}{if} (input == \textcolor{charliteral}{'R'} || input == \textcolor{charliteral}{'r'}) \{}
\DoxyCodeLine{57             cout << \textcolor{stringliteral}{"{}REGISTER"{}} << endl;}
\DoxyCodeLine{58             \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{59                 \textcolor{comment}{//Prompt for username}}
\DoxyCodeLine{60                 cout << \textcolor{stringliteral}{"{}Enter New Username (6 to 10 Characters): "{}};}
\DoxyCodeLine{61                 cin >> username;}
\DoxyCodeLine{62                 \textcolor{keywordflow}{while} (username.length() < 6 || username.length() > 10) \{}
\DoxyCodeLine{63                     cout << \textcolor{stringliteral}{"{}Username Does Not Meet Character Requirement."{}} << endl;}
\DoxyCodeLine{64                     cout << \textcolor{stringliteral}{"{}Enter New Username (6 to 10 Characters): "{}};}
\DoxyCodeLine{65                     cin >> username;}
\DoxyCodeLine{66                 \}}
\DoxyCodeLine{67                 \textcolor{comment}{//Check if username already exists}}
\DoxyCodeLine{68                 \textcolor{keywordflow}{if} (validtName())}
\DoxyCodeLine{69                     cout << \textcolor{stringliteral}{"{}Account Already Exists"{}} << endl;}
\DoxyCodeLine{70             \} \textcolor{keywordflow}{while} (username.length() < 6 || username.length() > 10 ||}
\DoxyCodeLine{71                     validtName());}
\DoxyCodeLine{72 }
\DoxyCodeLine{73             \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{74                 \textcolor{comment}{//Prompt for password}}
\DoxyCodeLine{75                 cout << \textcolor{stringliteral}{"{}Enter New Password (8 to 12 Characters): "{}};}
\DoxyCodeLine{76                 cin >> password;}
\DoxyCodeLine{77                 \textcolor{keywordflow}{while} (password.length() < 8 || password.length() > 12) \{}
\DoxyCodeLine{78                     cout << \textcolor{stringliteral}{"{}Password Does Not Meet Character Requirement"{}} << endl;}
\DoxyCodeLine{79                     cout << \textcolor{stringliteral}{"{}Enter New Password (8 to 12 Characters): "{}};}
\DoxyCodeLine{80                     cin >> password;}
\DoxyCodeLine{81                 \}}
\DoxyCodeLine{82             \} \textcolor{keywordflow}{while} (password.length() < 8 || password.length() > 12);}
\DoxyCodeLine{83 }
\DoxyCodeLine{84             regUsr();}
\DoxyCodeLine{85             cout << \textcolor{stringliteral}{"{}Account Successfully Created."{}} << endl;}
\DoxyCodeLine{86         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (input == \textcolor{charliteral}{'L'} || input == \textcolor{charliteral}{'l'}) \{}
\DoxyCodeLine{87             cout << \textcolor{stringliteral}{"{}LOGIN"{}} << endl;}
\DoxyCodeLine{88             cout << \textcolor{stringliteral}{"{}Enter Username : "{}};}
\DoxyCodeLine{89             cin >> username;}
\DoxyCodeLine{90             cout << \textcolor{stringliteral}{"{}Enter Password : "{}};}
\DoxyCodeLine{91             cin >> password;}
\DoxyCodeLine{92 }
\DoxyCodeLine{93             login();}
\DoxyCodeLine{94         \}}
\DoxyCodeLine{95     \}}
\DoxyCodeLine{96 }
\DoxyCodeLine{97     \textcolor{keywordtype}{void} login() \{}
\DoxyCodeLine{98         \textcolor{keywordtype}{bool} validUsr = validtUsr();}
\DoxyCodeLine{99         \textcolor{keywordtype}{bool} validAdmn = validtAdmn();}
\DoxyCodeLine{100 }
\DoxyCodeLine{101         \textcolor{keywordflow}{if} (validUsr \&\& isActive == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{102             cout << \textcolor{stringliteral}{"{}This Account Was Deactivated."{}} << endl;}
\DoxyCodeLine{103         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (validUsr) \{}
\DoxyCodeLine{104             loggedIn = \textcolor{keyword}{true};}
\DoxyCodeLine{105             isAdmin = \textcolor{keyword}{false};}
\DoxyCodeLine{106         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (validAdmn) \{}
\DoxyCodeLine{107             loggedIn = \textcolor{keyword}{true};}
\DoxyCodeLine{108             isAdmin = \textcolor{keyword}{true};}
\DoxyCodeLine{109         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!validUsr || !validAdmn) \{}
\DoxyCodeLine{110             loggedIn = \textcolor{keyword}{false};}
\DoxyCodeLine{111             isAdmin = \textcolor{keyword}{false};}
\DoxyCodeLine{112             cout<<\textcolor{stringliteral}{"{}You Entered an Invalid Username/Password."{}}<<endl;}
\DoxyCodeLine{113         \}}
\DoxyCodeLine{114     \}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116     \textcolor{keywordtype}{void} regUsr() \{}
\DoxyCodeLine{117         \textcolor{comment}{//Add user to user DB}}
\DoxyCodeLine{118         \mbox{\hyperlink{struct_user_info}{UserInfo}} newUser;}
\DoxyCodeLine{119         strcpy(newUser.username, username.c\_str());}
\DoxyCodeLine{120         strcpy(newUser.password, password.c\_str());}
\DoxyCodeLine{121         newUser.status=\textcolor{keyword}{true};}
\DoxyCodeLine{122 }
\DoxyCodeLine{123         fstream userDB(\textcolor{stringliteral}{"{}UserInfo.dat"{}}, ios::in | ios::app | ios::binary);}
\DoxyCodeLine{124         userDB.seekp(ios::app);}
\DoxyCodeLine{125         userDB.write(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char} *\textcolor{keyword}{>} (\&newUser), \textcolor{keyword}{sizeof} (newUser));}
\DoxyCodeLine{126         userDB.close();}
\DoxyCodeLine{127     \}}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     \textcolor{keywordtype}{bool} validtUsr() \{}
\DoxyCodeLine{130         fstream userDB(\textcolor{stringliteral}{"{}UserInfo.dat"{}}, ios::in | ios::app | ios::binary);}
\DoxyCodeLine{131         \mbox{\hyperlink{struct_user_info}{UserInfo}} temp;}
\DoxyCodeLine{132 }
\DoxyCodeLine{133         userDB.seekg(ios::beg);}
\DoxyCodeLine{134         \textcolor{keywordflow}{while} (userDB.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char} *\textcolor{keyword}{>} (\&temp), sizeof (temp))) \{}
\DoxyCodeLine{135             \textcolor{keywordflow}{if} (strcmp(temp.username, username.c\_str()) == 0 \&\&}
\DoxyCodeLine{136                     strcmp(temp.password, password.c\_str()) == 0 \&\&}
\DoxyCodeLine{137                     temp.status == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{138                 isActive=\textcolor{keyword}{true};}
\DoxyCodeLine{139                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{140             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (strcmp(temp.username, username.c\_str()) == 0 \&\&}
\DoxyCodeLine{141                     strcmp(temp.password, password.c\_str()) == 0 \&\&}
\DoxyCodeLine{142                     temp.status == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{143                 isActive=\textcolor{keyword}{false};}
\DoxyCodeLine{144                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{145             \}}
\DoxyCodeLine{146         \}}
\DoxyCodeLine{147         userDB.close();}
\DoxyCodeLine{148         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{149     \}}
\DoxyCodeLine{150 }
\DoxyCodeLine{151     \textcolor{keywordtype}{bool} validtName() \{}
\DoxyCodeLine{152         fstream userDB(\textcolor{stringliteral}{"{}UserInfo.dat"{}}, ios::in | ios::app | ios::binary);}
\DoxyCodeLine{153         \mbox{\hyperlink{struct_user_info}{UserInfo}} temp;}
\DoxyCodeLine{154 }
\DoxyCodeLine{155         userDB.seekg(ios::beg);}
\DoxyCodeLine{156         \textcolor{keywordflow}{while} (userDB.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char} *\textcolor{keyword}{>} (\&temp), sizeof (temp))) \{}
\DoxyCodeLine{157             \textcolor{keywordflow}{if} (strcmp(temp.username, username.c\_str()) == 0) \{}
\DoxyCodeLine{158                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{159             \}}
\DoxyCodeLine{160         \}}
\DoxyCodeLine{161         userDB.close();}
\DoxyCodeLine{162         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{163     \}}
\DoxyCodeLine{164 }
\DoxyCodeLine{165     \textcolor{keywordtype}{bool} validtAdmn() \{}
\DoxyCodeLine{166         fstream adminDB(\textcolor{stringliteral}{"{}AdminInfo.dat"{}}, ios::in | ios::app | ios::binary);}
\DoxyCodeLine{167         \mbox{\hyperlink{struct_admin_info}{AdminInfo}} temp;}
\DoxyCodeLine{168 }
\DoxyCodeLine{169         adminDB.seekg(ios::beg);}
\DoxyCodeLine{170         \textcolor{keywordflow}{while} (adminDB.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char} *\textcolor{keyword}{>} (\&temp), sizeof (temp))) \{}
\DoxyCodeLine{171             \textcolor{keywordflow}{if} (strcmp(temp.username, username.c\_str()) == 0 \&\&}
\DoxyCodeLine{172                     strcmp(temp.password, password.c\_str()) == 0) \{}
\DoxyCodeLine{173                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{174             \}}
\DoxyCodeLine{175         \}}
\DoxyCodeLine{176         adminDB.close();}
\DoxyCodeLine{177         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{178     \}}
\DoxyCodeLine{179 }
\DoxyCodeLine{180 \};}
\DoxyCodeLine{181 }
\DoxyCodeLine{182 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* SURVEYENGINE\_H */}\textcolor{preprocessor}{}}
\DoxyCodeLine{183 }

\end{DoxyCode}
